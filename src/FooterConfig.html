<footer style="position: fixed; bottom: 0; left: 0; width: 100%; text-align: center; padding: 8px 0; background: transparent;">
  <div id="server-box"></div>
  <script>
    // 替换对应链接
    const imgUrl = {
      cloudflare: 'https://os.quiyu.cn/1/cf.png',
      edgeone: 'https://os.quiyu.cn/1/eo.png',
      vercel: 'https://os.quiyu.cn/1/vercel.png',
      netlify: 'https://os.quiyu.cn/1/netlify.png'
    };
    const showText = '[欢迎]';
    const iconSize = '24px';
    const timeOut = 30000; // 30秒超时

    // 超时显示自定义文本 + 精准SERVER判定 (完整判定逻辑，一点没砍)
    let time = setTimeout(()=>{
      document.getElementById('server-box').innerHTML = showText;
    }, timeOut);

    fetch(window.location.href).then(res => {
      clearTimeout(time);
      // 核心判定：读取Server响应头+精准匹配平台
      let serverType = res.headers.get('Server').toLowerCase();
      let showIcon = '';
      if (serverType.indexOf('cloudflare') != -1) {
        showIcon = imgUrl.cloudflare;
      } else if (serverType.indexOf('edgeone') != -1) {
        showIcon = imgUrl.edgeone;
      } else if (serverType.indexOf('vercel') != -1) {
        showIcon = imgUrl.vercel;
      } else if (serverType.indexOf('netlify') != -1) {
        showIcon = imgUrl.netlify;
      }
      // 有匹配显示图标，无匹配显示欢迎
      document.getElementById('server-box').innerHTML = showIcon ? `<img src="${showIcon}" style="width:${iconSize};height:auto;vertical-align:middle;">` : showText;
    }).catch(()=>{
      clearTimeout(time);
      document.getElementById('server-box').innerHTML = showText;
    });
  </script>
</footer>