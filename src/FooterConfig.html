<footer style="position: fixed; bottom: 0; left: 0; width: 100%; text-align: center; padding: 8px 0; background: transparent;">
  <div id="server-content"></div>
  <script>
    // 替换对应链接
    const iconUrls = {
      cloudflare: 'https://os.quiyu.cn/1/cf.png',
      edgeone: 'https://os.quiyu.cn/1/eo.png',
      vercel: 'https://os.quiyu.cn/1/vercel.png',
      netlify: 'https://os.quiyu.cn/1/netlify.png'
    };
    const timeout = 30000;
    const iconSize = '24px';
    const tipText = '[欢迎]';

    // 超时显示自定义文本
    function fetchWithTimeout(url, t) {
      return Promise.race([fetch(url), new Promise((_, rej) => setTimeout(() => rej(), t))]);
    }

    async function render() {
      const box = document.getElementById('server-content');
      try {
        const res = await fetchWithTimeout(location.href, timeout);
        const server = res.headers.get('Server')?.toLowerCase() || '';
        let icon = '';
        if (server.includes('cloudflare')) icon = iconUrls.cloudflare;
        else if (server.includes('edgeone')) icon = iconUrls.edgeone;
        else if (server.includes('vercel')) icon = iconUrls.vercel;
        else if (server.includes('netlify')) icon = iconUrls.netlify;
        
        box.innerHTML = icon ? `<img src="${icon}" style="width:${iconSize};height:auto;vertical-align:middle;">` : tipText;
      } catch {
        box.innerHTML = tipText;
      }
    }
    render();
  </script>
</footer>
